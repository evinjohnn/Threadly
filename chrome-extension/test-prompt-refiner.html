<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threadly Prompt Refiner - Test Page</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #333;
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }
        
        .input-group div[contenteditable] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            min-height: 80px;
            background: white;
        }
        
        .platform-info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .instructions {
            background: #fff3e0;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #e65100;
        }
    </style>
</head>
<body>
    <h1>Threadly Prompt Refiner - Test Page</h1>
    
    <div class="instructions">
        <h3>Testing Instructions</h3>
        <p>This page simulates different AI platform interfaces to test the Threadly Prompt Refiner extension.</p>
        <ol>
            <li>Make sure the Threadly extension is installed and enabled</li>
            <li>Set your Gemini API key in the extension popup</li>
            <li>Type a prompt in any of the input areas below</li>
            <li>Click the "✨ Refine" button that should appear next to the input</li>
            <li>Observe how the prompt is enhanced for different platforms</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ChatGPT Interface Simulation</h2>
        <div class="platform-info">Simulates ChatGPT's message input area</div>
        <div class="input-group">
            <label for="chatgpt-input">Message ChatGPT</label>
            <textarea id="chatgpt-input" placeholder="Message ChatGPT..."></textarea>
        </div>
    </div>

    <div class="test-section">
        <h2>Claude Interface Simulation</h2>
        <div class="platform-info">Simulates Claude's composer area</div>
        <div class="input-group">
            <label for="claude-input">Talk to Claude</label>
            <div id="claude-input" contenteditable="true" data-testid="composer" placeholder="Talk to Claude..."></div>
        </div>
    </div>

    <div class="test-section">
        <h2>Gemini Interface Simulation</h2>
        <div class="platform-info">Simulates Gemini's prompt input</div>
        <div class="input-group">
            <label for="gemini-input">Enter a prompt</label>
            <textarea id="gemini-input" placeholder="Enter a prompt here..." aria-label="Enter a prompt"></textarea>
        </div>
    </div>

    <div class="test-section">
        <h2>Perplexity Interface Simulation</h2>
        <div class="platform-info">Simulates Perplexity's search query</div>
        <div class="input-group">
            <label for="perplexity-input">Ask anything</label>
            <div id="perplexity-input" contenteditable="true" data-testid="search-query" placeholder="Ask anything..."></div>
        </div>
    </div>

    <div class="test-section">
        <h2>Test Prompts</h2>
        <p>Try these sample prompts to see how they get refined for different platforms:</p>
        <ul>
            <li><strong>Coding:</strong> "help me with python"</li>
            <li><strong>Research:</strong> "climate change facts"</li>
            <li><strong>Personal Support:</strong> "I'm stressed about work"</li>
            <li><strong>Content Creation:</strong> "write a blog post"</li>
            <li><strong>Learning:</strong> "explain machine learning"</li>
            <li><strong>Technical Assistance:</strong> "my computer is slow"</li>
            <li><strong>Creativity:</strong> "give me story ideas"</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Expected Behavior</h2>
        <p>When you click the "✨" button, you should see:</p>
        <ul>
            <li>The button shows "⏳" while processing</li>
            <li>Your original prompt is enhanced with platform-specific formatting</li>
            <li>The refined prompt replaces your original text</li>
            <li>A success toast notification appears</li>
            <li>The button returns to its original state</li>
            <li>The button appears as a small circular sparkles icon inline next to the microphone button</li>
            <li>The button becomes more visible when you focus or hover over the input area</li>
            <li>The button uses a custom sparkle SVG icon instead of emoji</li>
        </ul>
    </div>

    <script>
        // Add placeholder text to contenteditable divs
        document.addEventListener('DOMContentLoaded', function() {
            const contentEditableDivs = document.querySelectorAll('[contenteditable="true"]');
            
            contentEditableDivs.forEach(div => {
                // Add placeholder behavior
                div.addEventListener('focus', function() {
                    if (this.textContent === '') {
                        this.textContent = this.getAttribute('placeholder');
                        this.style.color = '#999';
                    }
                });
                
                div.addEventListener('blur', function() {
                    if (this.textContent === this.getAttribute('placeholder')) {
                        this.textContent = '';
                    }
                });
                
                div.addEventListener('input', function() {
                    if (this.textContent !== this.getAttribute('placeholder')) {
                        this.style.color = '#000';
                    }
                });
            });
        });
    </script>
</body>
</html>
